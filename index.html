<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StarMaker User Data Fetcher by Cansing Softwares</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom scrollbar for better JSON output viewing */
        .json-output {
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
    </style>
    <script>
        // Function to display messages or errors to the user (instead of alert)
        function displayMessage(type, message) {
            const messageBox = document.getElementById('message-box');
            messageBox.innerHTML = message;
            messageBox.className = 'p-3 rounded-lg text-sm transition-all duration-300 ' +
                                   (type === 'error' ? 'bg-red-100 text-red-700' : 'bg-green-100 text-green-700');
        }

        async function fetchUserData() {
            const userIdInput = document.getElementById('user_id_input');
            const outputArea = document.getElementById('response-output');
            const submitButton = document.getElementById('submit-btn');
            const messageBox = document.getElementById('message-box');
            
            // Clear previous results and messages
            outputArea.textContent = 'Fetching data...';
            outputArea.classList.remove('bg-red-100', 'text-red-700');
            outputArea.classList.add('bg-gray-800');
            messageBox.className = 'hidden';

            const userId = userIdInput.value.trim();

            if (!userId) {
                displayMessage('error', 'Please enter a valid User ID (SID).');
                outputArea.textContent = '...';
                outputArea.classList.remove('bg-gray-800');
                return;
            }

            // Disable button during fetch
            submitButton.disabled = true;
            submitButton.textContent = 'Fetching...';

            // --- Replicating Python Request Details ---
            
            const url = "https://pay.starmakerstudios.com/rapid/user";
            
            // Static parameters provided in the Python script
            const staticParams = {
                'category': "6",
                'id': userId, // Dynamically set by user input
                'ts': "1740931730"
            };

            const params = new URLSearchParams(staticParams).toString();
            const fullUrl = `${url}?${params}`;

            // Headers replicated from the Python script
            const headers = {
                // User-Agent is crucial for mimicking the mobile environment
                'User-Agent': "Mozilla/5.0 (Linux; U; Android 14; en-in; SM-E546B Build/UP1A.231005.007) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.88 Mobile Safari/537.36 HeyTapBrowser/45.11.5.1",
                'Accept': "application/json, text/plain, */*",
                
                // NOTE: The Origin and Referer headers below are often restricted by the browser's
                // security policy (CORS and Fetch specification) and might not be successfully
                // sent exactly as specified when running client-side (in the browser).
                // They are included here to match the Python script intent as closely as possible.
                'Origin': "https://m.starmakerstudios.com",
                'Referer': "https://m.starmakerstudios.com/",
                'Accept-Language': "en-IN,en-US;q=0.9,en;q=0.8"
            };

            try {
                const response = await fetch(fullUrl, {
                    method: 'GET',
                    headers: headers,
                    mode: 'cors'
                });

                // Check for HTTP errors (e.g., 404, 500)
                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(`HTTP Error ${response.status}: ${errorText.substring(0, 100)}...`);
                }

                // Get the raw text response
                const responseText = await response.text();

                // Attempt to format as JSON for readability
                try {
                    const jsonObject = JSON.parse(responseText);
                    outputArea.textContent = JSON.stringify(jsonObject, null, 2);
                } catch (e) {
                    // If parsing fails, just display the raw text
                    outputArea.textContent = responseText;
                }
                
                displayMessage('success', 'Request successful. Response displayed below.');

            } catch (error) {
                console.error('Fetch Error:', error);
                // Display the error in the output box and message area
                outputArea.textContent = `Error during request:\n${error.message || 'Could not connect to server or request was blocked.'}`;
                outputArea.classList.remove('bg-gray-800');
                outputArea.classList.add('bg-red-100', 'text-red-700');
                displayMessage('error', 'Request Failed. Check the browser console for CORS/Network details.');
            } finally {
                // Re-enable button
                submitButton.disabled = false;
                submitButton.textContent = 'Submit Request';
            }
        }
    </script>
</head>
<body class="bg-gray-50 min-h-screen p-4 sm:p-8 flex items-center justify-center">

    <div class="w-full max-w-2xl bg-white shadow-2xl rounded-xl p-6 md:p-10 border border-gray-100">
        <h1 class="text-3xl font-extrabold text-blue-800 mb-2">StarMaker user datas Fetcher Database - Cansing softwares</h1>
        <p class="text-gray-600 mb-6">
            Enter the User ID (SID) to query the Starmaker API endpoint. 
        </p>

        <!-- Input Section -->
        <div class="mb-6">
            <label for="user_id_input" class="block text-sm font-medium text-gray-700 mb-2">User ID (SID)</label>
            <input 
                type="text" 
                id="user_id_input" 
                placeholder="e.g., 123456789" 
                class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition duration-150"
            >
        </div>

        <!-- Action Button -->
        <button 
            id="submit-btn"
            onclick="fetchUserData()"
            class="w-full py-3 px-4 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-500 focus:ring-opacity-50 transition duration-150 transform hover:scale-[1.01]"
        >
            Get Data
        </button>

        <!-- Message Box -->
        <div id="message-box" class="hidden mt-6">
            <!-- Messages will appear here -->
        </div>

        <!-- Output Section -->
        <div class="mt-8">
            <h2 class="text-xl font-semibold text-gray-800 mb-3 border-b pb-2">Your Result</h2>
            <pre 
                id="response-output" 
                class="json-output bg-gray-800 text-green-300 p-4 rounded-lg text-xs font-mono shadow-inner"
            >
                Enter a User ID and submit to see the API results here.
            </pre>
            <p class="text-xs text-gray-400 mt-2">
                Note: Client-side requests are subject to browser security rules (CORS). If the request fails, the server may be rejecting the cross-origin fetch.<br> Here you can get details of Username, UID and the Profile picture link, <br> <b>In our Security website you can use this user's UID for get Private details</b>
            </p>
        </div>
    </div>

</body>
</html>
